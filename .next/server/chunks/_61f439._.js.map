{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/intake/normalize.ts"],"sourcesContent":["export function normalizeInput(text: string): string {\r\n  return text\r\n    .replace(/\\r\\n/g, \"\\n\")\r\n    .replace(/\\t/g, \" \")\r\n    .replace(/\\s{2,}/g, \" \")\r\n    .trim();\r\n}\r\n"],"names":[],"mappings":";;;AAAO,SAAS,eAAe,IAAY;IACzC,OAAO,KACJ,OAAO,CAAC,SAAS,MACjB,OAAO,CAAC,OAAO,KACf,OAAO,CAAC,WAAW,KACnB,IAAI;AACT"}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/intake/tone-calibration.ts"],"sourcesContent":["export type Tone =\r\n  | \"neutral\"\r\n  | \"confident\"\r\n  | \"assertive\"\r\n  | \"speculative\";\r\n\r\nexport function calibrateTone(text: string): Tone {\r\n  const confidenceMarkers = [\"clearly\", \"definitely\", \"proven\"];\r\n  const speculativeMarkers = [\"might\", \"could\", \"possibly\"];\r\n\r\n  if (confidenceMarkers.some(w => text.includes(w))) return \"assertive\";\r\n  if (speculativeMarkers.some(w => text.includes(w))) return \"speculative\";\r\n\r\n  return \"neutral\";\r\n}\r\n"],"names":[],"mappings":";;;AAMO,SAAS,cAAc,IAAY;IACxC,MAAM,oBAAoB;QAAC;QAAW;QAAc;KAAS;IAC7D,MAAM,qBAAqB;QAAC;QAAS;QAAS;KAAW;IAEzD,IAAI,kBAAkB,IAAI,CAAC,CAAA,IAAK,KAAK,QAAQ,CAAC,KAAK,OAAO;IAC1D,IAAI,mBAAmB,IAAI,CAAC,CAAA,IAAK,KAAK,QAAQ,CAAC,KAAK,OAAO;IAE3D,OAAO;AACT"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/intake/domain-classifier.ts"],"sourcesContent":["export type Domain =\r\n  | \"product\"\r\n  | \"finance\"\r\n  | \"legal\"\r\n  | \"research\"\r\n  | \"general\";\r\n\r\nexport function classifyDomain(text: string): Domain {\r\n  const t = text.toLowerCase();\r\n\r\n  if (t.includes(\"regulation\") || t.includes(\"law\")) return \"legal\";\r\n  if (t.includes(\"revenue\") || t.includes(\"market\")) return \"finance\";\r\n  if (t.includes(\"experiment\") || t.includes(\"study\")) return \"research\";\r\n  if (t.includes(\"user\") || t.includes(\"feature\")) return \"product\";\r\n\r\n  return \"general\";\r\n}\r\n"],"names":[],"mappings":";;;AAOO,SAAS,eAAe,IAAY;IACzC,MAAM,IAAI,KAAK,WAAW;IAE1B,IAAI,EAAE,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC,QAAQ,OAAO;IAC1D,IAAI,EAAE,QAAQ,CAAC,cAAc,EAAE,QAAQ,CAAC,WAAW,OAAO;IAC1D,IAAI,EAAE,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC,UAAU,OAAO;IAC5D,IAAI,EAAE,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,YAAY,OAAO;IAExD,OAAO;AACT"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/claims/claim-decomposer.ts"],"sourcesContent":["// core/claims/claim-decomposer.ts\r\nimport { createHash } from \"crypto\";\r\nimport { ClaimType } from \"./claim-types\";\r\nimport { LLMProvider } from \"../../lib/llm/provider-adapter\";\r\n\r\nexport type AuditGravity = \"critical\" | \"high\" | \"medium\" | \"low\";\r\n\r\nexport type Claim = {\r\n  id: string;\r\n  text: string;\r\n  index: number;\r\n  type: ClaimType;\r\n  gravity: AuditGravity; // Moved from 'confidence' to 'gravity'\r\n  confidence: number;\r\n};\r\n\r\nexport async function decomposeClaims(\r\n  content: string,\r\n  provider: LLMProvider\r\n): Promise<Claim[]> {\r\n  const prompt = `\r\n    Act as a Senior Forensic Auditor (ex-McKinsey/SEC). \r\n    Decompose the following text into distinct, atomic claims.\r\n    \r\n    For each claim, identify:\r\n    1. The core assertion.\r\n    2. Type: factual | causal | normative | predictive | numerical.\r\n    3. Audit Gravity: \r\n       - critical: Violations of physics, law, or absolute guarantees (e.g. \"100% returns\").\r\n       - high: Unsubstantiated high-impact stats or causal chains.\r\n       - medium/low: Standard professional assertions.\r\n\r\n    Return the result ONLY as a JSON array of objects:\r\n    { \"text\": string, \"type\": ClaimType, \"gravity\": AuditGravity }\r\n\r\n    Text to audit: \"${content}\"\r\n  `;\r\n\r\n  const response = await provider.generate({ prompt, temperature: 0 });\r\n  const rawClaims: any[] = JSON.parse(response.text);\r\n\r\n  return rawClaims.map((c, idx) => ({\r\n    ...c,\r\n    id: `C${idx + 1}`,\r\n    index: idx,\r\n    confidence: 1.0,\r\n  }));\r\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;AAgB3B,eAAe,gBACpB,OAAe,EACf,QAAqB;IAErB,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;oBAeE,EAAE,QAAQ;EAC5B,CAAC;IAED,MAAM,WAAW,MAAM,SAAS,QAAQ,CAAC;QAAE;QAAQ,aAAa;IAAE;IAClE,MAAM,YAAmB,KAAK,KAAK,CAAC,SAAS,IAAI;IAEjD,OAAO,UAAU,GAAG,CAAC,CAAC,GAAG,MAAQ,CAAC;YAChC,GAAG,CAAC;YACJ,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC;YACjB,OAAO;YACP,YAAY;QACd,CAAC;AACH"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/claims/claim-linker.ts"],"sourcesContent":["import { Claim } from \"./claim-decomposer\";\r\n\r\nexport interface ClaimLink {\r\n  from: string;\r\n  to: string;\r\n}\r\n\r\nexport function linkClaims(claims: Claim[]): ClaimLink[] {\r\n  const links: ClaimLink[] = [];\r\n\r\n  for (let i = 1; i < claims.length; i++) {\r\n    links.push({\r\n      from: claims[i - 1].id,\r\n      to: claims[i].id,\r\n    });\r\n  }\r\n\r\n  return links;\r\n}\r\n"],"names":[],"mappings":";;;AAOO,SAAS,WAAW,MAAe;IACxC,MAAM,QAAqB,EAAE;IAE7B,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;QACtC,MAAM,IAAI,CAAC;YACT,MAAM,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE;YACtB,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE;QAClB;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/reasoning/graph-builder.ts"],"sourcesContent":["import { Claim } from \"../claims/claim-decomposer\";\r\nimport { ClaimLink } from \"../claims/claim-linker\";\r\n\r\nexport interface ReasoningGraph {\r\n  nodes: Claim[];\r\n  edges: ClaimLink[];\r\n}\r\n\r\nexport function buildGraph(\r\n  claims: Claim[],\r\n  links: ClaimLink[]\r\n): ReasoningGraph {\r\n  return {\r\n    nodes: claims,\r\n    edges: links,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAQO,SAAS,WACd,MAAe,EACf,KAAkB;IAElB,OAAO;QACL,OAAO;QACP,OAAO;IACT;AACF"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/reasoning/contradiction-checker.ts"],"sourcesContent":["import { Claim } from \"../claims/claim-decomposer\";\r\n\r\nexport function detectContradictions(claims: Claim[]): string[] {\r\n  const contradictions: string[] = [];\r\n\r\n  const texts = claims.map(c => c.text.toLowerCase());\r\n\r\n  if (\r\n    texts.some(t => t.includes(\"will happen\")) &&\r\n    texts.some(t => t.includes(\"will not happen\"))\r\n  ) {\r\n    contradictions.push(\"Direct future-state contradiction detected\");\r\n  }\r\n\r\n  return contradictions;\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,qBAAqB,MAAe;IAClD,MAAM,iBAA2B,EAAE;IAEnC,MAAM,QAAQ,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,WAAW;IAEhD,IACE,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,mBAC3B,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,qBAC3B;QACA,eAAe,IAAI,CAAC;IACtB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/reasoning/inference-gap-detector.ts"],"sourcesContent":["import { ReasoningGraph } from \"./graph-builder\";\r\n\r\nexport function detectInferenceGaps(graph: ReasoningGraph): string[] {\r\n  const gaps: string[] = [];\r\n\r\n  if (graph.nodes.length > 1 && graph.edges.length === 0) {\r\n    gaps.push(\"Claims are not logically connected\");\r\n  }\r\n\r\n  return gaps;\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,oBAAoB,KAAqB;IACvD,MAAM,OAAiB,EAAE;IAEzB,IAAI,MAAM,KAAK,CAAC,MAAM,GAAG,KAAK,MAAM,KAAK,CAAC,MAAM,KAAK,GAAG;QACtD,KAAK,IAAI,CAAC;IACZ;IAEA,OAAO;AACT"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/grounding/evidence-mapper.ts"],"sourcesContent":["// core/engines/grounding/evidence-mapper.ts\r\nimport { Claim } from \"@/core/claims/claim-decomposer\";\r\nimport { ClaimType } from \"../../claims/claim-types\"; \r\n\r\nexport interface EvidenceMatch {\r\n  claimId: string;\r\n  supported: boolean;\r\n  confidence: number;\r\n  sources: string[]; // <--- ADDED THIS (Critical Fix)\r\n  reasoning?: string;\r\n}\r\n\r\n// Mock implementation to satisfy the compiler until you connect real search\r\nexport function mapEvidence(claims: Claim[], sources: string[]): EvidenceMatch[] {\r\n  return claims.map((claim) => ({\r\n    claimId: claim.id,\r\n    supported: Math.random() > 0.3, // Mock logic\r\n    confidence: 0.8,\r\n    sources: sources, // <--- Now strictly assigning the sources to match the interface\r\n    reasoning: \"Matched via semantic similarity vector search.\"\r\n  }));\r\n}"],"names":[],"mappings":"AAAA,4CAA4C;;;;AAarC,SAAS,YAAY,MAAe,EAAE,OAAiB;IAC5D,OAAO,OAAO,GAAG,CAAC,CAAC,QAAU,CAAC;YAC5B,SAAS,MAAM,EAAE;YACjB,WAAW,KAAK,MAAM,KAAK;YAC3B,YAAY;YACZ,SAAS;YACT,WAAW;QACb,CAAC;AACH"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/grounding/grounding-engine.ts"],"sourcesContent":["// core/engines/grounding/grounding-engine.ts\r\nimport { EvidenceMatch } from \"./evidence-mapper\"; \r\n\r\nexport function computeGroundingScore(\r\n  matches: EvidenceMatch[]\r\n): number {\r\n  if (matches.length === 0) return 0;\r\n\r\n  const supported = matches.filter(m => m.supported).length;\r\n  // Basic algorithm: % of supported claims\r\n  return Math.round((supported / matches.length) * 100);\r\n}"],"names":[],"mappings":"AAAA,6CAA6C;;;;AAGtC,SAAS,sBACd,OAAwB;IAExB,IAAI,QAAQ,MAAM,KAAK,GAAG,OAAO;IAEjC,MAAM,YAAY,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,EAAE,MAAM;IACzD,yCAAyC;IACzC,OAAO,KAAK,KAAK,CAAC,AAAC,YAAY,QAAQ,MAAM,GAAI;AACnD"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/consistency/consistency-engine.ts"],"sourcesContent":["export function computeConsistencyScore(\r\n  contradictions: string[],\r\n  inferenceGaps: string[]\r\n): number {\r\n  const penalty =\r\n    contradictions.length * 30 + inferenceGaps.length * 15;\r\n\r\n  return Math.max(0, 100 - penalty);\r\n}\r\n"],"names":[],"mappings":";;;AAAO,SAAS,wBACd,cAAwB,EACxB,aAAuB;IAEvB,MAAM,UACJ,eAAe,MAAM,GAAG,KAAK,cAAc,MAAM,GAAG;IAEtD,OAAO,KAAK,GAAG,CAAC,GAAG,MAAM;AAC3B"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/risk/hallucination-detector.ts"],"sourcesContent":["import { RiskExplanation } from \"../../risk/types\";\r\nimport { Claim } from \"../../claims/claim-decomposer\";\r\n\r\ntype EvidenceMatch = {\r\n  claimId: string;\r\n  sources: string[];\r\n};\r\n\r\nexport function detectHallucinations(\r\n  claims: Claim[],\r\n  evidenceMatches: EvidenceMatch[]\r\n): RiskExplanation[] {\r\n\r\n  const evidenceByClaim = new Map(\r\n    evidenceMatches.map(e => [e.claimId, e.sources])\r\n  );\r\n\r\n  return claims\r\n    .filter(claim => {\r\n      const sources = evidenceByClaim.get(claim.id);\r\n      return !sources || sources.length === 0;\r\n    })\r\n    .map(claim => ({\r\n      id: `hallucination-${claim.id}`,\r\n      claimId: claim.id,\r\n      type: \"hallucination\",\r\n      severity: \"medium\",\r\n      reasoning: {\r\n        observation:\r\n          \"The claim makes an assertion without referencing supporting evidence.\",\r\n        missing: [\r\n          \"external benchmarks\",\r\n          \"independent validation\",\r\n          \"verifiable data sources\",\r\n        ],\r\n        implication:\r\n          \"This increases the risk that readers may treat speculative statements as factual.\",\r\n      },\r\n      remediation: {\r\n        action:\r\n          \"Explicitly state uncertainty or provide supporting external references.\",\r\n        example:\r\n          \"Internal testing suggests improvements, though no independent benchmarks are available yet.\",\r\n      },\r\n    }));\r\n}\r\n"],"names":[],"mappings":";;;AAQO,SAAS,qBACd,MAAe,EACf,eAAgC;IAGhC,MAAM,kBAAkB,IAAI,IAC1B,gBAAgB,GAAG,CAAC,CAAA,IAAK;YAAC,EAAE,OAAO;YAAE,EAAE,OAAO;SAAC;IAGjD,OAAO,OACJ,MAAM,CAAC,CAAA;QACN,MAAM,UAAU,gBAAgB,GAAG,CAAC,MAAM,EAAE;QAC5C,OAAO,CAAC,WAAW,QAAQ,MAAM,KAAK;IACxC,GACC,GAAG,CAAC,CAAA,QAAS,CAAC;YACb,IAAI,CAAC,cAAc,EAAE,MAAM,EAAE,CAAC,CAAC;YAC/B,SAAS,MAAM,EAAE;YACjB,MAAM;YACN,UAAU;YACV,WAAW;gBACT,aACE;gBACF,SAAS;oBACP;oBACA;oBACA;iBACD;gBACD,aACE;YACJ;YACA,aAAa;gBACX,QACE;gBACF,SACE;YACJ;QACF,CAAC;AACL"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/risk/overconfidence-detector.ts"],"sourcesContent":["import { Claim } from \"../../claims/claim-decomposer\";\r\nimport { Tone } from \"../../intake/tone-calibration\";\r\n\r\nexport function detectOverconfidence(\r\n  claims: Claim[],\r\n  tone: Tone\r\n): string[] {\r\n  if (tone !== \"assertive\") return [];\r\n\r\n  return claims\r\n    .filter(c => c.type === \"predictive\" || c.type === \"numerical\")\r\n    .map(c => `Overconfident phrasing in ${c.id}`);\r\n}\r\n"],"names":[],"mappings":";;;AAGO,SAAS,qBACd,MAAe,EACf,IAAU;IAEV,IAAI,SAAS,aAAa,OAAO,EAAE;IAEnC,OAAO,OACJ,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,gBAAgB,EAAE,IAAI,KAAK,aAClD,GAAG,CAAC,CAAA,IAAK,CAAC,0BAA0B,EAAE,EAAE,EAAE,CAAC,CAAC;AACjD"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/engines/assumptions/assumption-extractor.ts"],"sourcesContent":["import { Claim } from \"../../claims/claim-decomposer\";\r\n\r\nexport function extractAssumptions(claims: Claim[]): string[] {\r\n  const assumptions: string[] = [];\r\n\r\n  claims.forEach(c => {\r\n    if (c.text.includes(\"assumes\")) {\r\n      assumptions.push(c.text);\r\n    }\r\n  });\r\n\r\n  return assumptions;\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,mBAAmB,MAAe;IAChD,MAAM,cAAwB,EAAE;IAEhC,OAAO,OAAO,CAAC,CAAA;QACb,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY;YAC9B,YAAY,IAAI,CAAC,EAAE,IAAI;QACzB;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/scoring/trust-score.ts"],"sourcesContent":["export interface ETSComponents {\r\n  grounding: number;\r\n  consistency: number;\r\n  assumptions: number;\r\n  safety: number;\r\n  security: number;\r\n  calibration: number;\r\n}\r\n\r\nexport function computeETS(\r\n  components: ETSComponents,\r\n  weights: Record<keyof ETSComponents, number>\r\n): number {\r\n  let total = 0;\r\n\r\n  for (const key in components) {\r\n    total += components[key as keyof ETSComponents] *\r\n      weights[key as keyof ETSComponents];\r\n  }\r\n\r\n  return Math.round(total);\r\n}\r\n"],"names":[],"mappings":";;;AASO,SAAS,WACd,UAAyB,EACzB,OAA4C;IAE5C,IAAI,QAAQ;IAEZ,IAAK,MAAM,OAAO,WAAY;QAC5B,SAAS,UAAU,CAAC,IAA2B,GAC7C,OAAO,CAAC,IAA2B;IACvC;IAEA,OAAO,KAAK,KAAK,CAAC;AACpB"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/scoring/weighting-profiles.ts"],"sourcesContent":["export const ETS_WEIGHTS = {\r\n  founder: {\r\n    grounding: 0.25,\r\n    consistency: 0.25,\r\n    assumptions: 0.1,\r\n    safety: 0.15,\r\n    security: 0.1,\r\n    calibration: 0.15,\r\n  },\r\n  legal: {\r\n    grounding: 0.3,\r\n    consistency: 0.3,\r\n    assumptions: 0.15,\r\n    safety: 0.15,\r\n    security: 0.05,\r\n    calibration: 0.05,\r\n  },\r\n} as const;\r\n\r\n/* ðŸ‘‡ THIS IS THE KEY LINE */\r\nexport type WeightProfile = keyof typeof ETS_WEIGHTS;\r\n"],"names":[],"mappings":";;;AAAO,MAAM,cAAc;IACzB,SAAS;QACP,WAAW;QACX,aAAa;QACb,aAAa;QACb,QAAQ;QACR,UAAU;QACV,aAAa;IACf;IACA,OAAO;QACL,WAAW;QACX,aAAa;QACb,aAAa;QACb,QAAQ;QACR,UAAU;QACV,aAAa;IACf;AACF"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/core/pipelines/verify-pipeline.ts"],"sourcesContent":["import { normalizeInput } from \"../intake/normalize\";\r\nimport { calibrateTone } from \"../intake/tone-calibration\";\r\nimport { classifyDomain, Domain } from \"../intake/domain-classifier\";\r\n\r\nimport { decomposeClaims, Claim } from \"../claims/claim-decomposer\";\r\nimport { linkClaims } from \"../claims/claim-linker\";\r\n\r\nimport { buildGraph } from \"../reasoning/graph-builder\";\r\nimport { detectContradictions } from \"../reasoning/contradiction-checker\";\r\nimport { detectInferenceGaps } from \"../reasoning/inference-gap-detector\";\r\n\r\nimport { mapEvidence } from \"../engines/grounding/evidence-mapper\";\r\nimport { computeGroundingScore } from \"../engines/grounding/grounding-engine\";\r\nimport { computeConsistencyScore } from \"../engines/consistency/consistency-engine\";\r\n\r\nimport { detectHallucinations } from \"../engines/risk/hallucination-detector\";\r\nimport { detectOverconfidence } from \"../engines/risk/overconfidence-detector\";\r\n\r\nimport { extractAssumptions } from \"../engines/assumptions/assumption-extractor\";\r\n\r\nimport {\r\n  computeETS,\r\n  ETSComponents,\r\n} from \"../scoring/trust-score\";\r\n\r\nimport {\r\n  ETS_WEIGHTS,\r\n  WeightProfile,\r\n} from \"../scoring/weighting-profiles\";\r\n\r\nimport { RiskExplanation } from \"../risk/types\";\r\n\r\n/* -------------------------------\r\n   Types\r\n-------------------------------- */\r\n\r\nexport interface VerifyResult {\r\n  score: number;\r\n  claims: Claim[];\r\n  risks: RiskExplanation[];\r\n  explainability: {\r\n    contradictions: string[];\r\n    inferenceGaps: string[];\r\n    overconfidence: string[];\r\n    assumptions: string[];\r\n  };\r\n}\r\n\r\n/* -------------------------------\r\n   Main Pipeline (DETERMINISTIC)\r\n-------------------------------- */\r\n\r\nexport function verifyPipeline(\r\n  rawText: string,\r\n  profile: WeightProfile,\r\n  sources: string[] = []\r\n): VerifyResult {\r\n\r\n  /* 1. Normalize */\r\n  const text = normalizeInput(rawText);\r\n\r\n  /* 2. Intake signals */\r\n  const tone = calibrateTone(text);\r\n  const domain: Domain = classifyDomain(text);\r\n\r\n  /* 3. Claim decomposition (FORCE STABLE IDS) */\r\n  const rawClaims = decomposeClaims(text);\r\n\r\n  const claims: Claim[] = rawClaims.map((c, index) => ({\r\n    ...c,\r\n    id: `C${index + 1}`, // ðŸ”’ deterministic, repeatable, audit-safe\r\n  }));\r\n\r\n  /* 4. Reasoning structure */\r\n  const links = linkClaims(claims);\r\n  const graph = buildGraph(claims, links);\r\n\r\n  /* 5. Reasoning defects */\r\n  const contradictions = detectContradictions(claims);\r\n  const inferenceGaps = detectInferenceGaps(graph);\r\n\r\n  /* 6. Grounding */\r\n  const evidenceMatches = mapEvidence(claims, sources);\r\n  const groundingScore = computeGroundingScore(evidenceMatches);\r\n\r\n  /* 7. Consistency */\r\n  const consistencyScore = computeConsistencyScore(\r\n    contradictions,\r\n    inferenceGaps\r\n  );\r\n\r\n  /* 8. Risk Engines (STRUCTURED) */\r\n  const hallucinationRisks: RiskExplanation[] =\r\n    detectHallucinations(claims, evidenceMatches);\r\n\r\n  const overconfidenceSignals =\r\n    detectOverconfidence(claims, tone);\r\n\r\n  const assumptions =\r\n    extractAssumptions(claims);\r\n\r\n  /* 9. ETS components (WHITEPAPER-ALIGNED) */\r\n  const components: ETSComponents = {\r\n    grounding: groundingScore,\r\n    consistency: consistencyScore,\r\n    assumptions: Math.max(\r\n      0,\r\n      100 - assumptions.length * 10\r\n    ),\r\n    safety: Math.max(\r\n      0,\r\n      100 - hallucinationRisks.length * 20\r\n    ),\r\n    security: 100, // future security aggregation\r\n    calibration: Math.max(\r\n      0,\r\n      100 - overconfidenceSignals.length * 10\r\n    ),\r\n  };\r\n\r\n  /* 10. Final Trust Score */\r\n  const score = Math.max(\r\n    0,\r\n    Math.round(\r\n      computeETS(\r\n        components,\r\n        ETS_WEIGHTS[profile]\r\n      )\r\n    )\r\n  );\r\n\r\n  /* 11. Return ENTERPRISE-GRADE OUTPUT */\r\n  return {\r\n    score,\r\n    claims,\r\n    risks: hallucinationRisks,\r\n    explainability: {\r\n      contradictions,\r\n      inferenceGaps,\r\n      overconfidence: overconfidenceSignals,\r\n      assumptions,\r\n    },\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDO,SAAS,eACd,OAAe,EACf,OAAsB,EACtB,UAAoB,EAAE;IAGtB,gBAAgB,GAChB,MAAM,OAAO,8IAAe;IAE5B,qBAAqB,GACrB,MAAM,OAAO,uJAAc;IAC3B,MAAM,SAAiB,yJAAe;IAEtC,6CAA6C,GAC7C,MAAM,YAAY,yJAAgB;IAElC,MAAM,SAAkB,UAAU,GAAG,CAAC,CAAC,GAAG,QAAU,CAAC;YACnD,GAAG,CAAC;YACJ,IAAI,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC;QACrB,CAAC;IAED,0BAA0B,GAC1B,MAAM,QAAQ,gJAAW;IACzB,MAAM,QAAQ,oJAAW,QAAQ;IAEjC,wBAAwB,GACxB,MAAM,iBAAiB,sKAAqB;IAC5C,MAAM,gBAAgB,yKAAoB;IAE1C,gBAAgB,GAChB,MAAM,kBAAkB,kKAAY,QAAQ;IAC5C,MAAM,iBAAiB,6KAAsB;IAE7C,kBAAkB,GAClB,MAAM,mBAAmB,mLACvB,gBACA;IAGF,gCAAgC,GAChC,MAAM,qBACJ,6KAAqB,QAAQ;IAE/B,MAAM,wBACJ,8KAAqB,QAAQ;IAE/B,MAAM,cACJ,gLAAmB;IAErB,0CAA0C,GAC1C,MAAM,aAA4B;QAChC,WAAW;QACX,aAAa;QACb,aAAa,KAAK,GAAG,CACnB,GACA,MAAM,YAAY,MAAM,GAAG;QAE7B,QAAQ,KAAK,GAAG,CACd,GACA,MAAM,mBAAmB,MAAM,GAAG;QAEpC,UAAU;QACV,aAAa,KAAK,GAAG,CACnB,GACA,MAAM,sBAAsB,MAAM,GAAG;IAEzC;IAEA,yBAAyB,GACzB,MAAM,QAAQ,KAAK,GAAG,CACpB,GACA,KAAK,KAAK,CACR,gJACE,YACA,uJAAW,CAAC,QAAQ;IAK1B,sCAAsC,GACtC,OAAO;QACL;QACA;QACA,OAAO;QACP,gBAAgB;YACd;YACA;YACA,gBAAgB;YAChB;QACF;IACF;AACF"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/lib/logging/logger.ts"],"sourcesContent":["export type LogLevel = \"info\" | \"warn\" | \"error\";\r\n\r\nexport function log(level: LogLevel, message: string, meta?: unknown) {\r\n  const entry = {\r\n    level,\r\n    message,\r\n    meta,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  console[level](JSON.stringify(entry));\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,IAAI,KAAe,EAAE,OAAe,EAAE,IAAc;IAClE,MAAM,QAAQ;QACZ;QACA;QACA;QACA,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,OAAO,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC;AAChC"}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/app/api/verify/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { verifyPipeline } from \"@/core/pipelines/verify-pipeline\";\r\nimport { saveVerification } from \"@/lib/storage/db\";\r\nimport { log } from \"@/lib/logging/logger\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const body = await req.json();\r\n\r\n    const {\r\n      content,\r\n      profile,\r\n      sources = [],\r\n      userId,\r\n    } = body;\r\n\r\n    if (!content || !profile) {\r\n      return NextResponse.json(\r\n        { error: \"Missing content or profile\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const result = verifyPipeline(\r\n      content,\r\n      profile,\r\n      sources\r\n    );\r\n\r\n    // TEMP: persistence disabled during local testing\r\n// await saveVerification({\r\n//   userId,\r\n//   content,\r\n//   result,\r\n// });\r\n\r\n\r\n    log(\"info\", \"Verification completed\", {\r\n      userId,\r\n      score: result.score,\r\n    });\r\n\r\n    return NextResponse.json({\r\n      ok: true,\r\n      result,\r\n    });\r\n  } catch (err: any) {\r\n    log(\"error\", \"Verification failed\", err);\r\n    return NextResponse.json(\r\n      { error: \"Internal verification error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAKO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,MAAM,EACJ,OAAO,EACP,OAAO,EACP,UAAU,EAAE,EACZ,MAAM,EACP,GAAG;QAEJ,IAAI,CAAC,WAAW,CAAC,SAAS;YACxB,OAAO,wLAAa,IAAI,CACtB;gBAAE,OAAO;YAA6B,GACtC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,0JACb,SACA,SACA;QAGF,kDAAkD;QACtD,2BAA2B;QAC3B,YAAY;QACZ,aAAa;QACb,YAAY;QACZ,MAAM;QAGF,gIAAI,QAAQ,0BAA0B;YACpC;YACA,OAAO,OAAO,KAAK;QACrB;QAEA,OAAO,wLAAa,IAAI,CAAC;YACvB,IAAI;YACJ;QACF;IACF,EAAE,OAAO,KAAU;QACjB,gIAAI,SAAS,uBAAuB;QACpC,OAAO,wLAAa,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/.next-internal/server/app/api/verify/route/actions.js"],"sourcesContent":["__turbopack_export_value__({\n});"],"names":[],"mappings":"AAAA,2BAA2B,CAC3B"}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}